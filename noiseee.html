<!DOCTYPE html>
<html lang="it">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <title>Noisee</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <!-- Personal stylesheet -->
    <link rel="stylesheet" href="tngstyle.css">

    <!-- Google fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,100..700;1,100..700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet">

    <!-- Caricamento di Tone.js tramite CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.39/Tone.js"></script>    

</head>
<body>


<div class="container py-4">
        <header class="pb-3 mb-4 border-bottom">
          <a href="/" class="d-flex align-items-center text-body-emphasis text-decoration-none">

            <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="bi bi-skip-end-circle" viewBox="0 0 16 16">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16"/>
            <path d="M6.271 5.055a.5.5 0 0 1 .52.038L9.5 7.028V5.5a.5.5 0 0 1 1 0v5a.5.5 0 0 1-1 0V8.972l-2.71 1.935A.5.5 0 0 1 6 10.5v-5a.5.5 0 0 1 .271-.445"/>
            </svg>

            <i class="bi bi-balloon-fill" width="28" height="28" fill="currentColor"> </i>
            <span class="fs-1" style="font-weight: 600;">&nbspNoiseee</span>
            </a>
        </header>    
</div>

<div class="container">
    <div class="row">
        <div class="col">
            <h1>noiseeeeeee generator</h1>



                <div class="controls">
                    <br>
                    <label for="noiseType">Colore:</label>
                    <select id="noiseType" onchange="updateNoiseType()">
                        <option value="brown">Marrone</option>
                        <option value="white">Bianco</option>
                        <option value="pink">Rosa</option>
                        <option value="blue">Blu</option>
                        <option value="violet">Viola</option>
                    </select>
                </div>

                <div class="controls">
                    <label for="filterControl">Filtro passa-basso:</label>
                    <input type="range" id="filterControl" min="100" max="20000" value="20000" step="100" onchange="updateFilter()">
                    <span id="filterValue">20000</span> Hz
                </div>

                <div class="controls">
                    <br>
                    <button onclick="startNoise()">Avvia</button> 

                    <button onclick="stopNoise()">Stop</button>
                </div>                
            
        </div>
       
    </div>
</div>



   

    <!-- Elemento audio nascosto per prevenire il blocco dello schermo su iOS -->
    <audio id="prevent-sleep-audio" loop style="display: none;">
        <source src="silent-audio.mp3" type="audio/mp3">
    </audio>

    <script>
        let noise;
        let filter;

        // Funzione per iniziare il rumore
        function startNoise() {
            const noiseType = document.getElementById('noiseType').value;
            noise = new Tone.Noise(noiseType).start();
            filter = new Tone.Filter({
                frequency: document.getElementById('filterControl').value,
                type: "lowpass"
            }).toDestination();
            noise.connect(filter);

            Tone.Transport.start();
            preventScreenLock(true);
        }

        // Funzione per fermare il rumore
        function stopNoise() {
            if (noise) {
                noise.stop();
                Tone.Transport.stop();
                preventScreenLock(false);
            }
        }

        // Funzione per aggiornare il tipo di rumore
        function updateNoiseType() {
            if (noise) {
                const noiseType = document.getElementById('noiseType').value;
                noise.type = noiseType;
            }
        }

        // Funzione per aggiornare il filtro passa-basso
        function updateFilter() {
            const filterValue = document.getElementById('filterControl').value;
            document.getElementById('filterValue').innerText = filterValue;
            if (filter) {
                filter.frequency.value = filterValue;
            }
        }

        // Funzione per prevenire il blocco dello schermo su iOS
        function preventScreenLock(shouldPrevent) {
            const audio = document.getElementById('prevent-sleep-audio');
            if (shouldPrevent) {
                audio.play().catch(error => {
                    console.log("Autoplay prevenuto: ", error);
                });
            } else {
                audio.pause();
            }
        }
    </script>


<!-- Footer -->
    <div class="container">

        <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
        <p class="col-md-4 mb-0 text-body-secondary">

            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-balloon-heart-fill" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8.49 10.92C19.412 3.382 11.28-2.387 8 .986 4.719-2.387-3.413 3.382 7.51 10.92l-.234.468a.25.25 0 1 0 .448.224l.04-.08c.009.17.024.315.051.45.068.344.208.622.448 1.102l.013.028c.212.422.182.85.05 1.246-.135.402-.366.751-.534 1.003a.25.25 0 0 0 .416.278l.004-.007c.166-.248.431-.646.588-1.115.16-.479.212-1.051-.076-1.629-.258-.515-.365-.732-.419-1.004a2 2 0 0 1-.037-.289l.008.017a.25.25 0 1 0 .448-.224l-.235-.468ZM6.726 1.269c-1.167-.61-2.8-.142-3.454 1.135-.237.463-.36 1.08-.202 1.85.055.27.467.197.527-.071.285-1.256 1.177-2.462 2.989-2.528.234-.008.348-.278.14-.386"/>
        </svg>

        <a href="https://tongatron.github.io/"><strong>tongatron.github.io</strong></a>

        </p>

            

        <ul class="nav col-md-4 justify-content-end">
         

        </ul>

        </footer>
        
    </div>
    


    

</body>


<!-- Bootstrap JS, Popper.js, and jQuery -->


    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>





</html>
